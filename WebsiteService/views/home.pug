extends layout

block head
  link(rel='stylesheet', href='/styles/home.css')
  link(rel="stylesheet", href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css")
  script(src="/scripts/home.js")

block content
  .posts
    each post in posts
      .post-container
        .post
          a.post-header(href=`/profile/${post.Username}`)
            img.profile-image(src=`https://capstonemedia.s3.amazonaws.com/${post.Profile.profileImage}`, alt="Profile Image")
            .user-info
              h3.username #{post.Profile.name}
              span.username-handle @#{post.Username}
              span.created-at #{post.CreatedAt}
          a.post-content(href=`/post/${post.Id}`)
            p= post.Content
            if post.Media
              .post-media
                img(src=`https://capstonemedia.s3.amazonaws.com/${post.Media}`, alt="Post Image")
        .post-actions
          button.like-button(data-post-id=`${post.Id}`)
            i.fas.fa-heart
            span.like-count #{post.Likes}
          button.comment-button
            i.fas.fa-comment  #{post.CommentCount}
          button.repost-button
            i.fas.fa-retweet  #{post.RepostCount}
          button.bookmark-button
            i.fas.fa-bookmark  #{post.BookmarkCount}

  script.
    window.userLikes = !{JSON.stringify(user.Likes || [])};
